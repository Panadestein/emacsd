<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs literate configuration</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="[[https://panadestein.github.io/][Panadestein]]Panadestein" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<meta name="google-site-verification" content="UnH0G3uduefQ6n9JV-YfihFU5SrKCWPHlvu6Ancvghs" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XJW2VM2D12"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XJW2VM2D12');
</script>
<a href="https://github.com/Panadestein" class="github-corner" aria-label="View source on GitHub">
<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff;
position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6
C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
<path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4
142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6
171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2
200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8
198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5
C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave
560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}
@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner
.octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
</head>
<body>
<div id="content">
<h1 class="title">Emacs literate configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org77a2c84">A foreword on this config and Lisp</a>
<ul>
<li><a href="#orgd0938c9">Org-mode literate programming</a></li>
<li><a href="#org205603f">Automatic configuration with Nix</a></li>
</ul>
</li>
<li><a href="#orgec39c7e">General configuration</a>
<ul>
<li><a href="#org18f9e68">Setting up a package manager</a></li>
<li><a href="#orgb6638b4">One editor to rule them all, one editor to find them</a></li>
<li><a href="#org0818f78">Prevent custom from messing with my config file</a></li>
<li><a href="#orgdbd02bb">Only highlight programming and text buffers</a></li>
<li><a href="#orgb1d9cf4">Old habits die hard</a></li>
<li><a href="#org4bc3e47">Linear undo system</a></li>
<li><a href="#orga8a4b41">Themes</a></li>
<li><a href="#org95ec0f2">Handle very long lines</a></li>
<li><a href="#orgcabaf73">Improved parentheses</a></li>
<li><a href="#orgbf456c6">Highlight parentheses with different color</a></li>
<li><a href="#orga18fe41">Minimap</a></li>
<li><a href="#orgabf5e4c">Fancy mode line</a></li>
<li><a href="#orgaac9d94">Multiple cursors support</a></li>
<li><a href="#org68a109c">Tabs-bar-mode</a></li>
<li><a href="#org8540942">Fancy HTML exports</a></li>
</ul>
</li>
<li><a href="#org1f58898">IDE features and help</a>
<ul>
<li><a href="#orgc19141d">Complete everything (but code) in Emacs with ivy</a></li>
<li><a href="#org42269db">Jump anywhere in Emacs with avy</a></li>
<li><a href="#org3810f62">Create awesome command combos and menus with hydra</a></li>
<li><a href="#orgb2e35a0">Command's information with which-key</a></li>
<li><a href="#orgac56d0b">Improved help system with Helpful</a></li>
<li><a href="#org33b37ee">Code tags</a></li>
<li><a href="#org62766c2">Tree-sitter</a></li>
<li><a href="#org28812f6">Completion with company</a></li>
<li><a href="#org94d81aa">Language server protocol</a></li>
<li><a href="#org79d4611">Spell checking with FlySpell</a></li>
<li><a href="#orga0574f8">Grammar checking with LanguageTool</a></li>
<li><a href="#orgecb15b2">Translator</a></li>
<li><a href="#org5a523df">Syntax checking with Flycheck</a></li>
<li><a href="#org8cbb86d">Snippets</a></li>
<li><a href="#org7a23cd9">Better ediff configuration</a></li>
</ul>
</li>
<li><a href="#org69ce3a8">File browsing, terminal emulators, and web browsing</a>
<ul>
<li><a href="#orgb6a4083">Terminal support with Vterm</a></li>
<li><a href="#org3d2354e">Terminal support with Eshell</a></li>
<li><a href="#org8e8dbe0">TRAMP</a></li>
<li><a href="#org4abdf28">File browsers</a></li>
<li><a href="#org124a8de">Web browsers</a></li>
<li><a href="#orgb5f7def">IRC and Matrix</a></li>
<li><a href="#orgd57b80f">PDF support</a></li>
<li><a href="#orgbe765a3">Multimedia player</a></li>
</ul>
</li>
<li><a href="#org43c5899">Programming</a>
<ul>
<li><a href="#orge958bc0">Lisp</a></li>
<li><a href="#orgbd14f3a">My Emacs Lisp packages</a></li>
<li><a href="#orgbd3fc06">Fortran</a></li>
<li><a href="#org1c9113b">IRPF90</a></li>
<li><a href="#org2ed65c7">C and C++</a></li>
<li><a href="#org1376d14">Rust</a></li>
<li><a href="#org8a759bd">Makefile</a></li>
<li><a href="#org6f6a4ec">Cmake</a></li>
<li><a href="#orgf958a6c">Cuda</a></li>
<li><a href="#org308d478">Python</a></li>
<li><a href="#org35450b7">Julia</a></li>
<li><a href="#org1202d7b">Haskell</a></li>
<li><a href="#orgb455e26">Perl</a></li>
<li><a href="#org7cbeb55">Raku</a></li>
<li><a href="#orgdf19c92">Lua</a></li>
<li><a href="#org220b94c">Org-mode</a></li>
<li><a href="#org4dd5780">Latex</a></li>
<li><a href="#org849a6cb">Web</a></li>
<li><a href="#org1bf7df8">YAML</a></li>
<li><a href="#org3d97eef">Markdown</a></li>
<li><a href="#orga0c2f99">reStructuredText</a></li>
<li><a href="#orgbbb8858">AsciiDoc</a></li>
<li><a href="#orga56d14e">JSON</a></li>
<li><a href="#org071d722">Git</a></li>
<li><a href="#orgaf6b128">GitLab CI</a></li>
<li><a href="#orgb118495">The heretic Vimscript</a></li>
<li><a href="#org11db5f2">Nix expressions language</a></li>
<li><a href="#org41bd221">GNU Guix package manager</a></li>
</ul>
</li>
<li><a href="#org9c80ca9">Dirty hacks</a></li>
<li><a href="#org44eccf9">Footer of the Emacs package</a></li>
</ul>
</div>
</div>

<div id="outline-container-org77a2c84" class="outline-2">
<h2 id="org77a2c84">A foreword on this config and Lisp</h2>
<div class="outline-text-2" id="text-org77a2c84">
<p>
Welcome to my literate <a href="https://github.com/Panadestein/emacsd">Emacs configuration</a>. As many specimens of the pedigree,
this config ratifies that Newtonian aphorism involving giants. Many thanks to all the unsung
heroes whose Emacs Lisp snippets assemble the DNA of this file. Apropos of Lisp, I have
recently had a glimpse of the enlightenment promised by so many hacker's lore. Here is one
of my favorites, written by RMS: 
</p>

<p class="verse">
In days long ago,<br />
When clocks were so slow,<br />
These basic keystrokes<br />
Took too long for folks,<br />
Unless they were writ<br />
In C code to flit.<br />
Today that's not so,<br />
In Lisp they can go.<br />
</p>
</div>

<div id="outline-container-orgd0938c9" class="outline-3">
<h3 id="orgd0938c9">Org-mode literate programming</h3>
<div class="outline-text-3" id="text-orgd0938c9">
<p>
The beauty of literate configuration with org-mode is that it allows for maintaining an Emacs
config, a website, and an org-mode markup file at the same time. For example, in the header
of this file you can find the following code:
</p>

<div class="org-src-container">
<pre class="src src-org-mode">#+TITLE: Emacs literate configuration
#+PROPERTY: header-args :tangle ../init.el
#+OPTIONS: toc:2 num:nil
#+SETUPFILE: https://fniessen.github.io/org-html-themes/org/theme-readtheorg.setup
</pre>
</div>

<p>
With these options, I tangle (every time I save, see the org-mode <a href="#org2331190">hook</a>) the source code blocks
in this config to my Emacs <code>init.el</code>, and I set up the ReadTheOrg theme that the website uses.
A somehow tricky aspect is to get syntax highlighting when exporting to HTML
with <code>org-mode</code> using Emacs in batch mode. You can take a look at my <code>build-site.el</code>
script in the source <a href="https://github.com/Panadestein/emacsd">repo</a> to see how I achieve
this in practice.
</p>
</div>
</div>

<div id="outline-container-org205603f" class="outline-3">
<h3 id="org205603f">Automatic configuration with Nix</h3>
<div class="outline-text-3" id="text-org205603f">
<p>
Although it is possible to configure Emacs with Nix, I prefer to use the Elisp configuration. However, I do use
the following overlay, together with Cachix to have the latest commits of the Emacs' master branch:
</p>

<div class="org-src-container">
<pre class="src src-nix"><span style="color: #b8860b;">nixpkgs.overlays</span> = [
  <span style="color: #b22222;"># Emacs overlay</span>
  (<span style="color: #00008b;">import</span> (builtins.fetchTarball {
    <span style="color: #b8860b;">url</span> = <span style="color: #5f9ea0;">https://github.com/nix-community/emacs-overlay/archive/master.tar.gz</span>;
  }))
];

<span style="color: #b8860b;">environment.systemPackages</span> = <span style="color: #4169e1;">with</span> pkgs; [
  emacsGitNativeComp
];
</pre>
</div>

<p>
My <a href="https://github.com/Panadestein/nixos-config">NixOS configuration</a> is version controlled with git, and can automatically
deploy my Emacs distribution with <code>home-manager</code>: 
</p>

<div class="org-src-container">
<pre class="src src-nix"><span style="color: #b22222;"># </span><span style="color: #b22222;">Emacs configuration</span>
home.file.<span style="color: #bc8f8f;">".emacs.d/"</span> = {
  <span style="color: #b8860b;">source</span> = pkgs.fetchFromGitHub {
    <span style="color: #b8860b;">owner</span> = <span style="color: #bc8f8f;">"Panadestein"</span>;
    <span style="color: #b8860b;">repo</span> = <span style="color: #bc8f8f;">"emacsd"</span>;
    <span style="color: #b8860b;">rev</span> = <span style="color: #bc8f8f;">"f0713755fda2578638246ddb99e0cf26763cdd47"</span>;
    <span style="color: #b8860b;">sha256</span> = <span style="color: #bc8f8f;">"00230dm4ssjxyn5crw7qjazs0zk8y2s3ir7ddq5p7rb7x4glgxh4"</span>;
  };
  <span style="color: #b8860b;">recursive</span> = <span style="color: #00008b;">true</span>;
  <span style="color: #b8860b;">onChange</span> = builtins.readFile <span style="color: #5f9ea0;">/etc/nixos/dotfiles/set_emacs.sh</span>;
};
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/</span><span style="color: #4169e1;">env</span><span style="color: #b22222;"> bash</span>

<span style="color: #00008b;">cd</span> <span style="color: #bc8f8f;">"$HOME"</span>/.emacs.d
mkdir -p ./lib ./snippets/irp-mode ./undo
emacs --batch --eval <span style="color: #bc8f8f;">"(require 'org)"</span> --eval <span style="color: #bc8f8f;">'(org-babel-tangle-file "./content/index.org")'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgec39c7e" class="outline-2">
<h2 id="orgec39c7e">General configuration</h2>
<div class="outline-text-2" id="text-orgec39c7e">
<p>
To comply with the Emacs <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Library-Headers.html">conventions</a> for libraries, the tangled <code>init.el</code> must have the following header and <a href="#org4021a3c">footer</a>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init.el --- Panadestein's Emacs configuration -*- lexical-binding: t -*-</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Copyright (C) 2020-2022 Ram&#243;n L. Panad&#233;s Barrueta</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Author: Ram&#243;n L. Panad&#233;s Barrueta <a href="mailto:rpana92%40gmail.com">&lt;rpana92@gmail.com&gt;</a></span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Keywords: internal</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">URL: https://panadestein.github.io/emacsd/</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">A fully fledged, reproducible Emacs configuration</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>
</pre>
</div>
</div>

<div id="outline-container-org18f9e68" class="outline-3">
<h3 id="org18f9e68">Setting up a package manager</h3>
<div class="outline-text-3" id="text-org18f9e68">
<p>
One of the cornerstones of any Emacs distribution is the package manager. In my case, I was mostly a happy user
of <code>use-package</code> with the <code>package.el</code> backend. However, I did find myself in the need of using a more recent
version of some packages (like <code>org-mode</code>). While there are tools like <code>Quelpa</code> that allow this without
ditching <code>package.el</code>, I decided to go for the option that ensures reproducibility: <a href="https://github.com/radian-software/straight.el">straight.el</a>. With this
purely functional package manager, I feel closer to the high ideals of the Nix community.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">bootstrap-version</span>)
(<span style="color: #4169e1;">let</span> ((bootstrap-file
       (expand-file-name <span style="color: #bc8f8f;">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory))
      (bootstrap-version 5))
  (<span style="color: #4169e1;">unless</span> (file-exists-p bootstrap-file)
    (<span style="color: #4169e1;">with-current-buffer</span>
        (url-retrieve-synchronously
         <span style="color: #bc8f8f;">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
</pre>
</div>

<p>
In order to use <code>straight.el</code> properly, we need to add the following content to our <code>early-init.el</code> file:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">early-init.el --- Emacs early init file</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Code to run before init.el is loaded.</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable package.el</span>
(<span style="color: #4169e1;">setq</span> package-enable-at-startup nil)

(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">early-init</span>)
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">early-init.el ends here</span>
</pre>
</div>

<p>
We can also have a nice integration with <code>use-package</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'use-package)
(use-package straight
  <span style="color: #00008b;">:custom</span> (straight-use-package-by-default t)
  <span style="color: #00008b;">:bind</span>  ((<span style="color: #bc8f8f;">"C-&lt;f2&gt;"</span> . hydra-straight-helper/body)))
</pre>
</div>

<p>
For reference, I still show here how to set <code>use-package</code> with <code>package.el</code>. First we add the GNU ELPA
and MELPA archives, and then require <code>use-package</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> package-archives '((<span style="color: #bc8f8f;">"gnu"</span> . <span style="color: #bc8f8f;">"https://elpa.gnu.org/packages/"</span>)
                         (<span style="color: #bc8f8f;">"melpa"</span> . <span style="color: #bc8f8f;">"https://melpa.org/packages/"</span>))
      package-quickstart nil)

(<span style="color: #4169e1;">eval-and-compile</span>
  (<span style="color: #4169e1;">unless</span> (<span style="color: #4169e1;">and</span> (fboundp 'package-installed-p)
               (package-installed-p 'use-package))
    (package-refresh-contents)
    (package-install 'use-package))
  (<span style="color: #4169e1;">if</span> init-file-debug  
      (<span style="color: #4169e1;">setq</span> use-package-compute-statistics t)
    (<span style="color: #4169e1;">setq</span> use-package-compute-statistics nil))
  (<span style="color: #4169e1;">setq</span> use-package-always-ensure t)
  (<span style="color: #4169e1;">setq</span> use-package-expand-minimally t)
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">use-package</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6638b4" class="outline-3">
<h3 id="orgb6638b4">One editor to rule them all, one editor to find them</h3>
<div class="outline-text-3" id="text-orgb6638b4">
<p>
Here I use the <code>use-package</code> macro to keep all Emacs internal settings organized in one single block.
The variables have self-explanatory names, but I have added a few comments for the sake of clarity. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package emacs
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:preface</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-reload-emacs</span> ()
    <span style="color: #bc8f8f;">"Reload the Emacs configuration"</span>
    (<span style="color: #4169e1;">interactive</span>)
    (load-file <span style="color: #bc8f8f;">"~/.emacs.d/init.el"</span>))
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">revert-buffer-no-confirm</span> ()
    <span style="color: #bc8f8f;">"Revert buffer without confirmation."</span>
    (<span style="color: #4169e1;">interactive</span>) (revert-buffer t t))
  <span style="color: #00008b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs internal options</span>
  (<span style="color: #4169e1;">setq-default</span> initial-scratch-message <span style="color: #bc8f8f;">";; Welcome Panadestein!!"</span>
                ring-bell-function #'ignore
                user-full-name <span style="color: #bc8f8f;">"Ram&#243;n L. Panad&#233;s-Barrueta, PhD"</span>
                inhibit-startup-screen t
                custom-safe-themes t)
  (<span style="color: #4169e1;">setq</span> backup-directory-alist
        `((<span style="color: #bc8f8f;">"."</span> . ,(concat user-emacs-directory <span style="color: #bc8f8f;">"backups"</span>))))
  (<span style="color: #4169e1;">if</span> init-file-debug
      (<span style="color: #4169e1;">setq</span> warning-minimum-level <span style="color: #00008b;">:debug</span>)
    (<span style="color: #4169e1;">setq</span> warning-minimum-level <span style="color: #00008b;">:emergency</span>))
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (show-paren-mode 1)
  (fringe-mode '(0 . 0))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">No scroll bar, always full screen</span>
  (add-to-list 'default-frame-alist
               '(vertical-scroll-bars . nil))
  (add-to-list 'default-frame-alist '(fullscreen . maximized))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Font</span>
  (add-to-list 'default-frame-alist '(font . <span style="color: #bc8f8f;">"Fira Code-18"</span>))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Terminal transparency</span>
  (face-spec-set 'default
                 '((((type tty)) <span style="color: #00008b;">:background</span> <span style="color: #bc8f8f;">"unspecified-bg"</span>)))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Line numbers</span>
  (<span style="color: #4169e1;">when</span> (version&lt;= <span style="color: #bc8f8f;">"26.0.50"</span> emacs-version)
    (global-display-line-numbers-mode)
    (<span style="color: #4169e1;">setq</span> display-line-numbers-type 'relative))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Remember line number</span>
  (<span style="color: #4169e1;">if</span> (fboundp #'save-place-mode)
      (save-place-mode +1)
    (<span style="color: #4169e1;">setq-default</span> save-place t))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Mimetypes</span>
  (<span style="color: #4169e1;">setq</span> mailcap-user-mime-data
        '((type . <span style="color: #bc8f8f;">"application/pdf"</span>)
          (viewer . pdf-view-mode)))
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #b22222;">;; </span><span style="color: #b22222;">Make ESC close prompts</span>
   (<span style="color: #bc8f8f;">"&lt;escape&gt;"</span> . keyboard-escape-quit)
   (<span style="color: #bc8f8f;">"C-c C-r"</span> . revert-buffer-no-confirm)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0818f78" class="outline-3">
<h3 id="org0818f78">Prevent custom from messing with my config file</h3>
<div class="outline-text-3" id="text-org0818f78">
<p>
This helps to clear the clutter and increases reproducibility of the config
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">let</span>
    ((customization-file (expand-file-name <span style="color: #bc8f8f;">"custom.el"</span> user-emacs-directory)))
  (<span style="color: #4169e1;">when</span> (file-exists-p customization-file)
    (<span style="color: #4169e1;">setq</span> custom-file customization-file)
    (load custom-file 'noerror)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbd02bb" class="outline-3">
<h3 id="orgdbd02bb">Only highlight programming and text buffers</h3>
<div class="outline-text-3" id="text-orgdbd02bb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hl-line
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:hook</span>
  (prog-mode . hl-line-mode)
  (text-mode . hl-line-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb1d9cf4" class="outline-3">
<h3 id="orgb1d9cf4">Old habits die hard</h3>
<div class="outline-text-3" id="text-orgb1d9cf4">
<p>
I cannot just trash years of Vim muscle memory workout. However, the Emacs keybindings
slowly start to <i>klappt</i>, and for some major modes it just does not make sense to use Evil.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:demand</span> t
  <span style="color: #00008b;">:config</span>
  (evil-mode 1)
  (evil-set-undo-system 'undo-tree)
  (mapc (<span style="color: #4169e1;">lambda</span> (mode)
          (evil-set-initial-state mode 'emacs))
        '(eww-mode
          profiler-report-mode
          elfeed-mode
          helpful-mode
          pdf-view-mode
          eshell-mode
          vterm-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4bc3e47" class="outline-3">
<h3 id="org4bc3e47">Linear undo system</h3>
<div class="outline-text-3" id="text-org4bc3e47">
<p>
This is one of the not so awesome quirks of Emacs IMHO. Maybe one day I will understand
its power. I keep it linear for the moment.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package undo-tree
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (global-undo-tree-mode)
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> undo-tree-history-directory-alist '((<span style="color: #bc8f8f;">"."</span> . <span style="color: #bc8f8f;">"~/.emacs.d/undo"</span>)))
  (<span style="color: #4169e1;">setq</span> undo-tree-visualizer-timestamps t)
  (<span style="color: #4169e1;">setq</span> undo-tree-visualizer-diff t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8a4b41" class="outline-3">
<h3 id="orga8a4b41">Themes</h3>
<div class="outline-text-3" id="text-orga8a4b41">
<p>
As Nietzsche said, the voice of beauty speaks softly; it creeps only into the most fully awakened souls.
Ergo the importance of a visually pleasant editor. These are my top three themes:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package doom-themes
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Global settings (defaults)</span>
  (<span style="color: #4169e1;">setq</span> doom-themes-enable-bold t
        doom-themes-enable-italic t)
  (load-theme 'doom-vibrant t)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Enable flashing mode-line on errors</span>
  (doom-themes-visual-bell-config)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Enable custom neotree theme (all-the-icons must be installed!)</span>
  (doom-themes-neotree-config)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">or for treemacs users</span>
  (<span style="color: #4169e1;">setq</span> doom-themes-treemacs-theme <span style="color: #bc8f8f;">"doom-atom"</span>)
  (<span style="color: #4169e1;">setq</span> doom-themes-treemacs-enable-variable-pitch nil)
  (doom-themes-treemacs-config)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Corrects (and improves) org-mode's native fontification.</span>
  (doom-themes-org-config))

(use-package gruvbox-theme
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:disabled</span>
  <span style="color: #00008b;">:init</span> (load-theme 'gruvbox-dark-soft t))

(use-package blackboard-theme
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:disabled</span>
  <span style="color: #00008b;">:init</span> (load-theme 'blackboard t))
</pre>
</div>

<p>
And of course, highlight numbers in source code:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package highlight-numbers
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span>
  (prog-mode . highlight-numbers-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org95ec0f2" class="outline-3">
<h3 id="org95ec0f2">Handle very long lines</h3>
<div class="outline-text-3" id="text-org95ec0f2">
<p>
Another well-known issue of Emacs, although it rarely affects me.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package so-long
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:hook</span>
  (after-init-hook . global-so-long-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcabaf73" class="outline-3">
<h3 id="orgcabaf73">Improved parentheses</h3>
<div class="outline-text-3" id="text-orgcabaf73">
<p>
This helps a lot when lisping.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package smartparens
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> (prog-mode . smartparens-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf456c6" class="outline-3">
<h3 id="orgbf456c6">Highlight parentheses with different color</h3>
<div class="outline-text-3" id="text-orgbf456c6">
<p>
Another eye candy. Parenthesis of different colors are very helpful in Lisp though.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rainbow-delimiters
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> (prog-mode . rainbow-delimiters-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga18fe41" class="outline-3">
<h3 id="orga18fe41">Minimap</h3>
<div class="outline-text-3" id="text-orga18fe41">
<p>
This package implements Sublime Text's minimap in Emacs. Although I am quasi-satisfied with
this config, I am not ready to use it on a regular basis.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package minimap
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> minimap-window-location 'right)
  (<span style="color: #4169e1;">setq</span> minimap-minimum-width 10)
  (<span style="color: #4169e1;">setq</span> minimap-dedicated-window t)
  (<span style="color: #4169e1;">setq</span> minimap-hide-cursor t)
  (<span style="color: #4169e1;">setq</span> minimap-hide-scroll-bar t)
  (<span style="color: #4169e1;">setq</span> minimap-hide-fringes t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabf5e4c" class="outline-3">
<h3 id="orgabf5e4c">Fancy mode line</h3>
<div class="outline-text-3" id="text-orgabf5e4c">
<p>
Another gift from the Doom Emacs community. Best modeline I have seen for Emacs.
The additional package <code>all-the-icons</code> provides awesome icons not only for the
modeline, but also for file managers and many other packages.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package all-the-icons
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Needs a manual `M-x all-the-icons-install-fonts`</span>
  <span style="color: #00008b;">:straight</span> t)

(use-package doom-modeline
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span> (doom-modeline-mode 1)
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> doom-modeline-height 55)
  (<span style="color: #4169e1;">setq</span> doom-modeline-buffer-file-name-style 'relative-to-project)
  (<span style="color: #4169e1;">setq</span> doom-line-numbers-style 'relative)
  (<span style="color: #4169e1;">setq</span> doom-modeline-major-mode-icon t)
  (<span style="color: #4169e1;">setq</span> doom-modeline-buffer-state-icon t)
  (<span style="color: #4169e1;">setq</span> doom-modeline-major-mode-color-icon t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaac9d94" class="outline-3">
<h3 id="orgaac9d94">Multiple cursors support</h3>
<div class="outline-text-3" id="text-orgaac9d94">
<p>
This package is very interesting, although not so ergonomic IMHO. Here are some of the
most relevant commands:
</p>

<ul class="org-ul">
<li><code>C-n</code> make and go to next match</li>
<li><code>C-p</code> make and go to previous match</li>
<li><code>g r q</code> stop all cursors</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil-mc
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (global-evil-mc-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org68a109c" class="outline-3">
<h3 id="org68a109c">Tabs-bar-mode</h3>
<div class="outline-text-3" id="text-org68a109c">
<p>
I could not manage to use this package without side effects in Evil-mode. Here is a simple
usage:
</p>

<ul class="org-ul">
<li><code>C-x t f "filename"</code> opens file in new tab</li>
<li><code>C-x t 0</code> closes current tab</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tabbar
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-&lt;right&gt;"</span> . tabbar-forward)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8540942" class="outline-3">
<h3 id="org8540942">Fancy HTML exports</h3>
<div class="outline-text-3" id="text-org8540942">
<p>
This package ensures that some <code>org-mode</code> babel exports have proper syntax highlighting.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package htmlize
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1f58898" class="outline-2">
<h2 id="org1f58898">IDE features and help</h2>
<div class="outline-text-2" id="text-org1f58898">
</div>
<div id="outline-container-orgc19141d" class="outline-3">
<h3 id="orgc19141d">Complete everything (but code) in Emacs with ivy</h3>
<div class="outline-text-3" id="text-orgc19141d">
<p>
The usage of ivy and their autocompletion army (swiper, counsel) has greatly increased my
productivity. It is also very well integrated with the Doom Emacs theme I use. The swiper
search feature (<code>C-s</code>) is far more powerful than the default Emacs counterpart. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ivy
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:diminish</span>
  <span style="color: #00008b;">:bind</span>
  ((<span style="color: #bc8f8f;">"C-s"</span> . swiper))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> ivy-use-virtual-buffers t)
  (ivy-mode 1))

(use-package swiper
  <span style="color: #00008b;">:straight</span> t)

(use-package counsel
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> ivy
  <span style="color: #00008b;">:hook</span>
  (after-init . counsel-mode)
  <span style="color: #00008b;">:config</span> (counsel-mode)
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #bc8f8f;">"M-x"</span> . counsel-M-x)
  (<span style="color: #bc8f8f;">"C-x b"</span> . ido-switch-buffer)
  (<span style="color: #bc8f8f;">"C-c f"</span> . counsel-recentf)
  (<span style="color: #bc8f8f;">"C-M-l"</span> . counsel-imenu)
  (<span style="color: #bc8f8f;">"C-x C-f"</span> . counsel-find-file)
  (<span style="color: #bc8f8f;">"&lt;f1&gt; v"</span> . counsel-describe-variable)
  (<span style="color: #bc8f8f;">"&lt;f1&gt; f"</span> . counsel-descbinds-function))

(use-package ivy-prescient
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> counsel
  <span style="color: #00008b;">:config</span>
  (ivy-prescient-mode 1))

(use-package ivy-rich
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (ivy-rich-mode 1)
  <span style="color: #00008b;">:after</span> counsel
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> ivy-format-function #'ivy-format-function-line)
  (<span style="color: #4169e1;">setq</span> ivy-rich-display-transformers-list
        (plist-put ivy-rich-display-transformers-list
                   'ivy-switch-buffer
                   '(<span style="color: #00008b;">:columns</span>
                     ((ivy-rich-candidate (<span style="color: #00008b;">:width</span> 40))
                      (ivy-rich-switch-buffer-indicators
                       (<span style="color: #00008b;">:width</span> 4 <span style="color: #00008b;">:face</span> error <span style="color: #00008b;">:align</span> right))
                      (ivy-rich-switch-buffer-major-mode
                       (<span style="color: #00008b;">:width</span> 12 <span style="color: #00008b;">:face</span> warning))
                      (ivy-rich-switch-buffer-project
                       (<span style="color: #00008b;">:width</span> 15 <span style="color: #00008b;">:face</span> success))
                      (ivy-rich-switch-buffer-path
                       (<span style="color: #00008b;">:width</span> (<span style="color: #4169e1;">lambda</span> (x) (ivy-rich-switch-buffer-shorten-path
                                            x (ivy-rich-minibuffer-width 0.3))))))))))

(use-package all-the-icons-ivy
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:demand</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org42269db" class="outline-3">
<h3 id="org42269db">Jump anywhere in Emacs with avy</h3>
<div class="outline-text-3" id="text-org42269db">
<p>
This powerful package comes with tons of features for jumping to visible text
using a char-based decision tree. I have a minimal configuration, as <code>avy-goto-char-timer</code>
achieves most of the functionality I need:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package avy
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"M-j"</span> . avy-goto-char-timer)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3810f62" class="outline-3">
<h3 id="org3810f62">Create awesome command combos and menus with hydra</h3>
<div class="outline-text-3" id="text-org3810f62">
<p>
This packages makes it very easy to create keybindings combinations using a common prefix. It also generates a
menu showing the possible commands:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hydra
  <span style="color: #00008b;">:straight</span> t)

(use-package use-package-hydra
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>

<p>
Here is a nice example for <code>straight.el</code> (the <code>:color</code> keyword symbol has a special <a href="https://github.com/abo-abo/hydra#color">purpose</a> here):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(defhydra hydra-straight-helper (<span style="color: #00008b;">:hint</span> nil <span style="color: #00008b;">:color</span> pink)
  <span style="color: #bc8f8f;">"</span>
<span style="color: #bc8f8f;">_c_: check all       _f_: fetch all     _m_: merge all       _n_: normalize all      _u_: push all</span>
<span style="color: #bc8f8f;">_C_: check package   _F_: fetch package _M_: merge package   _N_: normalize package  _U_: push package</span>
<span style="color: #bc8f8f;">_r_: rebuild all     _p_: pull all      _w_: watcher start   _g_: get recipe         _v_: versions freeze</span>
<span style="color: #bc8f8f;">_R_: rebuild package _P_: pull package  _W_: watcher quit    _e_: prune build        _q_: quit</span>
<span style="color: #bc8f8f;">"</span>
  (<span style="color: #bc8f8f;">"c"</span> straight-check-all)
  (<span style="color: #bc8f8f;">"C"</span> straight-check-package)
  (<span style="color: #bc8f8f;">"r"</span> straight-rebuild-all)
  (<span style="color: #bc8f8f;">"R"</span> straight-rebuild-package)
  (<span style="color: #bc8f8f;">"f"</span> straight-fetch-all)
  (<span style="color: #bc8f8f;">"F"</span> straight-fetch-package)
  (<span style="color: #bc8f8f;">"p"</span> straight-pull-all)
  (<span style="color: #bc8f8f;">"P"</span> straight-pull-package)
  (<span style="color: #bc8f8f;">"m"</span> straight-merge-all)
  (<span style="color: #bc8f8f;">"M"</span> straight-merge-package)
  (<span style="color: #bc8f8f;">"n"</span> straight-normalize-all)
  (<span style="color: #bc8f8f;">"N"</span> straight-normalize-package)
  (<span style="color: #bc8f8f;">"u"</span> straight-push-all)
  (<span style="color: #bc8f8f;">"U"</span> straight-push-package)
  (<span style="color: #bc8f8f;">"w"</span> straight-watcher-start)
  (<span style="color: #bc8f8f;">"W"</span> straight-watcher-quit)
  (<span style="color: #bc8f8f;">"g"</span> straight-get-recipe)
  (<span style="color: #bc8f8f;">"e"</span> straight-prune-build)
  (<span style="color: #bc8f8f;">"v"</span> straight-freeze-versions)
  (<span style="color: #bc8f8f;">"q"</span> nil <span style="color: #00008b;">:color</span> blue))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2e35a0" class="outline-3">
<h3 id="orgb2e35a0">Command's information with which-key</h3>
<div class="outline-text-3" id="text-orgb2e35a0">
<p>
Which-key is a must-have to sail the raging seas of Emacs' packages keybindings. These suggestions
come very handy when exploring a new package.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package which-key
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:diminish</span>
  <span style="color: #00008b;">:custom</span>
  (which-key-idle-secondary-delay 0.01)
  (which-key-dont-use-unicode t)
  <span style="color: #00008b;">:config</span>
  (which-key-mode t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac56d0b" class="outline-3">
<h3 id="orgac56d0b">Improved help system with Helpful</h3>
<div class="outline-text-3" id="text-orgac56d0b">
<p>
Emacs default help system is very good. Helpful makes it awesome by adding colors and source code
exploration.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package helpful
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:custom</span>
  (counsel-describe-variable-function #'helpful-variable)
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #bc8f8f;">"C-h f"</span> . helpful-function)
  ([remap describe-symbol] . helpful-symbol)
  ([remap describe-variable] . helpful-variable)
  ([remap describe-command] . helpful-command)
  ([remap describe-key] . helpful-key))
</pre>
</div>
</div>
</div>

<div id="outline-container-org33b37ee" class="outline-3">
<h3 id="org33b37ee">Code tags</h3>
<div class="outline-text-3" id="text-org33b37ee">
<p>
Using code tags when developing in large scale codes (like electronic structure packages)
can save your fingers from <code>grep</code> induced damage. I use the minimalistic <code>gtags-mode</code> that
relies as much as possible on already existing Emacs tools. I also have configured the <code>counsel-etags</code>
package, though its approach of parsing the TAGS file makes it very slow when used with TRAMP.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gtags-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> ((emacs-startup . gtags-mode)))

(use-package counsel-etags
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:disabled</span>
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-]"</span> . counsel-etags-find-tag-at-point))
  <span style="color: #00008b;">:init</span>
  (add-hook 'prog-mode-hook
            (<span style="color: #4169e1;">lambda</span> ()
              (add-hook 'after-save-hook
                        'counsel-etags-virtual-update-tags 'append 'local)))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> counsel-etags-update-interval 60)
  (<span style="color: #4169e1;">push</span> <span style="color: #bc8f8f;">"build"</span> counsel-etags-ignore-directories))
</pre>
</div>
</div>
</div>

<div id="outline-container-org62766c2" class="outline-3">
<h3 id="org62766c2">Tree-sitter</h3>
<div class="outline-text-3" id="text-org62766c2">
<p>
Emacs package to use the incremental parsing library <a href="https://tree-sitter.github.io/tree-sitter/">tree-sitter</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tree-sitter
  <span style="color: #00008b;">:straight</span> t)

(use-package tree-sitter-langs
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> tree-sitter)
</pre>
</div>
</div>
</div>

<div id="outline-container-org28812f6" class="outline-3">
<h3 id="org28812f6">Completion with company</h3>
<div class="outline-text-3" id="text-org28812f6">
<p>
Source code completions. An all-time classic.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (add-hook 'after-init-hook 'global-company-mode)
  (<span style="color: #4169e1;">setq</span> company-minimum-prefix-length 3
        company-selection-wrap-around t
        company-tooltip-limit 20
        company-tooltip-minimum-width 15
        company-tooltip-align-annotations t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org94d81aa" class="outline-3">
<h3 id="org94d81aa">Language server protocol</h3>
<div class="outline-text-3" id="text-org94d81aa">
<p>
Microsoft's Language Server Protocol (LSP) is a great tool to provide IDE features to Emacs.
I use two major-modes for managing the lsp servers, namely <code>lsp-mode</code> and <code>eglot</code>.
The latter maximizes the use of already existing Emacs infrastructure.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-lsp-hook</span> ()                      
    <span style="color: #bc8f8f;">"Do not use lsp-mode with tramp"</span>         
    (<span style="color: #4169e1;">unless</span> (file-remote-p default-directory)
      (lsp)))                                
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> lsp-idle-delay 0.5
        lsp-enable-symbol-highlighting t
        lsp-enable-snippet nil
        lsp-pyls-plugins-flake8-enabled t)
  (lsp-register-custom-settings
   '((<span style="color: #bc8f8f;">"pyls.plugins.pyls_mypy.enabled"</span> nil nil)
     (<span style="color: #bc8f8f;">"pyls.plugins.pyls_mypy.live_mode"</span> nil t)
     (<span style="color: #bc8f8f;">"pyls.plugins.pyls_black.enabled"</span> t t)
     (<span style="color: #bc8f8f;">"pyls.plugins.pyls_isort.enabled"</span> t t)
     <span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable duplicated by flake8</span>
     (<span style="color: #bc8f8f;">"pyls.plugins.pycodestyle.enabled"</span> nil t)
     (<span style="color: #bc8f8f;">"pyls.plugins.mccabe.enabled"</span> nil t)
     (<span style="color: #bc8f8f;">"pyls.plugins.pyflakes.enabled"</span> nil t)))
  <span style="color: #00008b;">:hook</span>
  ((python-mode . my-lsp-hook)
   (f90-mode . my-lsp-hook)
   (lsp-mode . lsp-enable-which-key-integration)))

(use-package lsp-ui
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> (lsp-mode . lsp-ui-mode)
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> lsp-ui-sideline-show-hover t
        lsp-ui-sideline-delay 0.5
        lsp-ui-doc-delay 5
        lsp-ui-sideline-ignore-duplicates t
        lsp-ui-doc-position 'bottom
        lsp-ui-doc-alignment 'frame
        lsp-ui-doc-header nil
        lsp-ui-doc-include-signature t
        lsp-ui-doc-use-childframe t)
  <span style="color: #00008b;">:commands</span> lsp-ui-mode)

(use-package lsp-treemacs
  <span style="color: #00008b;">:after</span> treemacs lsp
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>

<p>
It is possible to create <code>lsp-mode</code> clients that should work over ssh.
An example for Fortran and Python:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(lsp-register-client
 (make-lsp-client <span style="color: #00008b;">:new-connection</span> (lsp-tramp-connection <span style="color: #bc8f8f;">"&lt;fortls&gt;"</span>)
                  <span style="color: #00008b;">:major-modes</span> '(f90-mode)
                  <span style="color: #00008b;">:remote?</span> t
                  <span style="color: #00008b;">:server-id</span> 'fortls-remote))
(lsp-register-client
 (make-lsp-client <span style="color: #00008b;">:new-connection</span> (lsp-tramp-connection <span style="color: #bc8f8f;">"&lt;pyls&gt;"</span>)
                  <span style="color: #00008b;">:major-modes</span> '(python-mode)
                  <span style="color: #00008b;">:remote?</span> t
                  <span style="color: #00008b;">:server-id</span> 'pyls-remote))
</pre>
</div>

<p>
On my experience however, <code>eglot</code> has better support for editing with TRAMP. As you
can see, there is little configuration here, as most of the defaults are optimal
for my workflow.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eglot
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org79d4611" class="outline-3">
<h3 id="org79d4611">Spell checking with FlySpell</h3>
<div class="outline-text-3" id="text-org79d4611">
<p>
FlySpell does a lot out of the box, therefore I have a very basic config.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flyspell
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:hook</span>
  ((prog-mode . flyspell-prog-mode)
   (text-mode . turn-on-flyspell))
  <span style="color: #00008b;">:config</span>
  (flyspell-mode +1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga0574f8" class="outline-3">
<h3 id="orga0574f8">Grammar checking with LanguageTool</h3>
<div class="outline-text-3" id="text-orga0574f8">
<p>
This is a free and open-source multilingual grammar checker that supports more than thirty languages.
A must-have if you write papers in LaTeX or org-mode. For the Emacs package to work one needs to install
the <a href="https://languagetool.org/">LanguageTool</a> package, and start the HTTP server for example as a systemd unit.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package langtool
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq</span> langtool-http-server-host <span style="color: #bc8f8f;">"localhost"</span>
        langtool-http-server-port 8081))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgecb15b2" class="outline-3">
<h3 id="orgecb15b2">Translator</h3>
<div class="outline-text-3" id="text-orgecb15b2">
<p>
This is a very powerful translator integrated with Emacs. It supports multiple translation engines such as Google, Bing, and DeepL.
I prefer to use pop-ups for the translation, so I need to install the <code>posframe</code> package in addition.
The translation directions can be changed in the prompt with <code>C-n</code> and <code>C-p</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package go-translate
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span>
  ((<span style="color: #bc8f8f;">"C-c C-t"</span> . gts-do-translate))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> gts-translate-list '((<span style="color: #bc8f8f;">"de"</span> <span style="color: #bc8f8f;">"en"</span>)
                             (<span style="color: #bc8f8f;">"fr"</span> <span style="color: #bc8f8f;">"en"</span>)
                             (<span style="color: #bc8f8f;">"en"</span> <span style="color: #bc8f8f;">"es"</span>)))
  (<span style="color: #4169e1;">setq</span> gts-default-translator
        (gts-translator
         <span style="color: #00008b;">:picker</span>
         (gts-prompt-picker)
         <span style="color: #00008b;">:engines</span>
         (list (gts-bing-engine) (gts-google-engine))
         <span style="color: #00008b;">:render</span>
         (gts-posframe-pop-render))))

(use-package posframe
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a523df" class="outline-3">
<h3 id="org5a523df">Syntax checking with Flycheck</h3>
<div class="outline-text-3" id="text-org5a523df">
<p>
Flycheck is another helpful tool. It has some limitations though. For instance, the continuous
checking can harm performance, and some checkers can introduce huge penalties (I had to
disable <code>mypy</code>). With this config I only check when saving.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flycheck
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq-default</span> flycheck-disabled-checkers '(python-mypy))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> flycheck-check-syntax-automatically '(save mode-enable))
  (<span style="color: #4169e1;">setq</span> flycheck-scheme-chicken-executable <span style="color: #bc8f8f;">"csc"</span>)
  <span style="color: #00008b;">:hook</span>
  (after-init . global-flycheck-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8cbb86d" class="outline-3">
<h3 id="org8cbb86d">Snippets</h3>
<div class="outline-text-3" id="text-org8cbb86d">
<p>
Yasnippet is a fairly complete collection of snippets with a very intuitive syntax. Painful is the absence
of Scheme snippets. I have written some custom snippets for the IRPF90 derived mode, which I also include
here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yasnippet
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (yas-global-mode 1))

(use-package yasnippet-snippets
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> yasnippet)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yasnippet"># -*- mode: snippet -*-
# name: ASSERT 
# key: ass
# --
ASSERT ($0)%
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yasnippet"># -*- mode: snippet -*-
# name: BEGIN_DOC ... END_DOC
# key: bc
# --
BEGIN_DOC
! $0
END_DOC%   
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yasnippet"># -*- mode: snippet -*-
# name: BEGIN_PROVIDER ... END_PROVIDER 
# key: bp
# --
BEGIN_PROVIDER [${1:integer}, ${2:var}]
    $0
END_PROVIDER%  
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yasnippet"># -*- mode: snippet -*-
# -*- mode: snippet -*-
# name: BEGIN_SHELL ... END_SHELL 
# key: bsh
# --
BEGIN_SHELL [ ${1:/bin/bash} ]
    $0
END_SHELL%  
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a23cd9" class="outline-3">
<h3 id="org7a23cd9">Better ediff configuration</h3>
<div class="outline-text-3" id="text-org7a23cd9">
<p>
Emacs built-in <code>ediff</code> is more powerful than <code>vimdiff</code> IMHO. However, the default configuration can be improved a bit:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ediff
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:preface</span>
  (<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">my-ediff-original-windows</span> nil)
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-store-pre-ediff-winconfig</span> ()
    <span style="color: #bc8f8f;">"Stores the window arrangement before opening ediff."</span>
    (<span style="color: #4169e1;">setq</span> my-ediff-original-windows (current-window-configuration)))
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-restore-pre-ediff-winconfig</span> ()
    <span style="color: #bc8f8f;">"Resets original window arrangement"</span>
    (set-window-configuration my-ediff-original-windows))
  <span style="color: #00008b;">:hook</span>
  ((ediff-before-setup . my-store-pre-ediff-winconfig)
   (ediff-quit . my-restore-pre-ediff-winconfig))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain
        ediff-split-window-function 'split-window-horizontally))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org69ce3a8" class="outline-2">
<h2 id="org69ce3a8">File browsing, terminal emulators, and web browsing</h2>
<div class="outline-text-2" id="text-org69ce3a8">
</div>
<div id="outline-container-orgb6a4083" class="outline-3">
<h3 id="orgb6a4083">Terminal support with Vterm</h3>
<div class="outline-text-3" id="text-orgb6a4083">
<p>
This package uses a C library instead of Lisp to emulate the terminals. It is my favorite emulator
currently.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package vterm
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:preface</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my/vterm-mode-hook</span> ()
    (hl-line-mode -1)
    (display-line-numbers-mode -1)
    (display-fill-column-indicator-mode -1)
    (auto-fill-mode -1))
  <span style="color: #00008b;">:hook</span>
  ((vterm-mode . my/vterm-mode-hook))
  <span style="color: #00008b;">:custom</span>
  (vterm-kill-buffer-on-exit t)
  (vterm-max-scrollback 10000)
  (vterm-tramp-shells '((<span style="color: #bc8f8f;">"ssh"</span> <span style="color: #bc8f8f;">"/bin/bash"</span>)))
  <span style="color: #00008b;">:init</span>
  (which-key-add-key-based-replacements <span style="color: #bc8f8f;">"C-c t"</span> <span style="color: #bc8f8f;">"term"</span>)
  <span style="color: #00008b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Add find-file-other-window to accepted commands</span>
  (add-to-list 'vterm-eval-cmds
               '(<span style="color: #bc8f8f;">"find-file-other-window"</span> find-file-other-window)))

(use-package vterm-toggle
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-`"</span> . vterm-toggle-cd)
         <span style="color: #00008b;">:map</span> vterm-mode-map
         ((<span style="color: #bc8f8f;">"&lt;C-return&gt;"</span> . vterm-toggle-insert-cd)
          (<span style="color: #bc8f8f;">"C-M-n"</span> . vterm-toggle-forward)
          (<span style="color: #bc8f8f;">"C-M-p"</span> . vterm-toggle-backward)))
  <span style="color: #00008b;">:custom</span>
  (vterm-toggle-scope 'project)
  (vterm-toggle-project-root t)
  (vterm-toggle-fullscreen-p nil)
  <span style="color: #00008b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Show at bottom</span>
  (add-to-list 'display-buffer-alist
               '((<span style="color: #4169e1;">lambda</span>(bufname _)
                   (<span style="color: #4169e1;">with-current-buffer</span> bufname
                     (equal major-mode 'vterm-mode)))
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">(display-buffer-reuse-window display-buffer-at-bottom)</span>
                 (display-buffer-reuse-window display-buffer-in-direction)
                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">display-buffer-in-direction/direction/dedicated is added in emacs27</span>
                 (direction . bottom)
                 (dedicated . t) <span style="color: #b22222;">;</span><span style="color: #b22222;">dedicated is supported in emacs27</span>
                 (reusable-frames . visible)
                 (window-height . 0.3))))
</pre>
</div>

<p>
A very nice <code>vterm</code> feature is the possibility of <a href="https://github.com/akermu/emacs-libvterm#message-passing">message passing</a>, allowing for executing Emacs commands from within a
<code>vterm</code> buffer, even remote ones. It requires some configuration on the <code>.bashrc</code>. For example, for opening remote
files, one could do the following:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #0000ff;">vterm_printf</span>(){
    <span style="color: #4169e1;">if</span> [ -n <span style="color: #bc8f8f;">"$TMUX"</span> ] &amp;&amp; ([ <span style="color: #bc8f8f;">"${TERM%%-*}"</span> = <span style="color: #bc8f8f;">"tmux"</span> ] || [ <span style="color: #bc8f8f;">"${TERM%%-*}"</span> = <span style="color: #bc8f8f;">"screen"</span> ] ); <span style="color: #4169e1;">then</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">Tell tmux to pass the escape sequences through</span>
        printf <span style="color: #bc8f8f;">"\ePtmux;\e\e]%s\007\e\\"</span> <span style="color: #bc8f8f;">"$1"</span>
    <span style="color: #4169e1;">elif</span> [ <span style="color: #bc8f8f;">"${TERM%%-*}"</span> = <span style="color: #bc8f8f;">"screen"</span> ]; <span style="color: #4169e1;">then</span>
        <span style="color: #b22222;"># </span><span style="color: #b22222;">GNU screen (screen, screen-256color, screen-256color-bce)</span>
        printf <span style="color: #bc8f8f;">"\eP\e]%s\007\e\\"</span> <span style="color: #bc8f8f;">"$1"</span>
    <span style="color: #4169e1;">else</span>
        printf <span style="color: #bc8f8f;">"\e]%s\e\\"</span> <span style="color: #bc8f8f;">"$1"</span>
    <span style="color: #4169e1;">fi</span>
}

<span style="color: #0000ff;">vterm_cmd</span>() {
    local vterm_elisp
    <span style="color: #b8860b;">vterm_elisp</span>=<span style="color: #bc8f8f;">""</span>
    <span style="color: #4169e1;">while</span> [ $<span style="color: #b8860b;">#</span> -gt 0 ]; <span style="color: #4169e1;">do</span>
        <span style="color: #b8860b;">vterm_elisp</span>=<span style="color: #bc8f8f;">"$vterm_elisp""$(printf '"%s" ' "$(printf "%s" "$1" | sed -e 's|\\|\\\\|g' -e 's|"|\\"|g')")"</span>
        <span style="color: #00008b;">shift</span>
    <span style="color: #4169e1;">done</span>
    vterm_printf <span style="color: #bc8f8f;">"51;E$vterm_elisp"</span>
}

<span style="color: #0000ff;">find_file</span>() {
    <span style="color: #00008b;">echo</span> <span style="color: #bc8f8f;">"/ssh:$(whoami)@$(hostname):$(realpath "${@:-.}")"</span>
    vterm_cmd find-file <span style="color: #bc8f8f;">"/ssh:remotehost:$(realpath "${@:-.}")"</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d2354e" class="outline-3">
<h3 id="org3d2354e">Terminal support with Eshell</h3>
<div class="outline-text-3" id="text-org3d2354e">
<p>
This is a command shell written purely in Emacs Lisp. While not being POSIX compliant,
it is still a powerful tool for remote editing due to its native TRAMP support. Here I define
a custom prompt that resembles my Zsh one. Use <code>clear 1</code> to have the same behaviour of
<code>bash</code>'s clear function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eshell
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:preface</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-exit</span> ()
    <span style="color: #bc8f8f;">"Remove window when exiting"</span>
    (<span style="color: #4169e1;">when</span> (not (one-window-p))
      (delete-window)))
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-eshell-prompt</span> ()
    <span style="color: #bc8f8f;">"A nice prompt"</span>
    (concat
     <span style="color: #bc8f8f;">"("</span> (user-login-name) <span style="color: #bc8f8f;">" . "</span>
     (car (reverse (split-string (eshell/pwd) <span style="color: #bc8f8f;">"/"</span>))) <span style="color: #bc8f8f;">") "</span>))
  <span style="color: #00008b;">:hook</span>
  ((eshell-mode . (<span style="color: #4169e1;">lambda</span> ()
                    (add-to-list 'eshell-visual-commands <span style="color: #bc8f8f;">"ssh"</span>)
                    (add-to-list 'eshell-visual-commands <span style="color: #bc8f8f;">"tail"</span>)
                    (add-to-list 'eshell-visual-commands <span style="color: #bc8f8f;">"top"</span>)
                    (eshell/alias <span style="color: #bc8f8f;">"e"</span> <span style="color: #bc8f8f;">"find-file-other-window $1"</span>)
                    (eshell/alias <span style="color: #bc8f8f;">"d"</span> <span style="color: #bc8f8f;">"dired-other-window $1"</span>) 
                    (eshell/alias <span style="color: #bc8f8f;">"mgu"</span> <span style="color: #bc8f8f;">"magit-diff-unstaged"</span>)
                    (eshell/alias <span style="color: #bc8f8f;">"mg"</span> <span style="color: #bc8f8f;">"magit-diff-staged"</span>))))
  <span style="color: #00008b;">:custom</span>
  (eshell-banner-message
   (propertize
    (<span style="color: #4169e1;">let</span> ((default-directory <span style="color: #bc8f8f;">"~"</span>))
      (shell-command-to-string <span style="color: #bc8f8f;">"figlet Eshell"</span>))
    'face `(<span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"#cc5492"</span>)))
  (eshell-history-size 10000)
  (eshell-hist-ignore-dups t)
  (eshell-buffer-maximum-lines 10000)
  (eshell-scroll-to-bottom-on-input t)
  (eshell-destroy-buffer-when-process-dies t)
  (eshell-prompt-regexp <span style="color: #bc8f8f;">"^[</span><span style="color: #bc8f8f;">^</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">)]*[</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">)] "</span>)
  (eshell-prompt-function #'my-eshell-prompt)
  <span style="color: #00008b;">:config</span>
  (advice-add 'eshell-life-is-too-much <span style="color: #00008b;">:after</span> 'my-exit)
  (setenv <span style="color: #bc8f8f;">"PAGER"</span> <span style="color: #bc8f8f;">"cat"</span>))

(use-package eshell-toggle
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:custom</span>
  (eshell-toggle-size-fraction 3)
  (eshell-toggle-use-projectile-root nil)
  (eshell-toggle-run-command nil)
  (eshell-toggle-init-function #'eshell-toggle-init-eshell)
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #bc8f8f;">"C-c p"</span> . eshell-toggle))

(use-package eshell-syntax-highlighting
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (eshell-syntax-highlighting-global-mode +1))

(use-package fish-completion
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span>
  (eshell-mode . fish-completion-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8e8dbe0" class="outline-3">
<h3 id="org8e8dbe0">TRAMP</h3>
<div class="outline-text-3" id="text-org8e8dbe0">
<p>
Another must have of Emacs. This package together with dired saves me from configuring
my editor all the time in obscure supercomputers around the world.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tramp                                        
  <span style="color: #00008b;">:straight</span> nil                                             
  <span style="color: #00008b;">:custom</span>                                                 
  (tramp-default-method <span style="color: #bc8f8f;">"ssh"</span>)                           
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> remote-file-name-inhibit-cache nil)
  (<span style="color: #4169e1;">setq</span> vc-ignore-dir-regexp               
        (format <span style="color: #bc8f8f;">"%s</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">|</span><span style="color: #bc8f8f;">%s"</span>                  
                vc-ignore-dir-regexp       
                tramp-file-name-regexp))   
  (<span style="color: #4169e1;">setq</span> tramp-verbose 1))                  

(use-package tramp-sh                                     
  <span style="color: #00008b;">:straight</span> nil                                             
  <span style="color: #00008b;">:config</span>                                                 
  (add-to-list 'tramp-remote-path 'tramp-own-remote-path))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4abdf28" class="outline-3">
<h3 id="org4abdf28">File browsers</h3>
<div class="outline-text-3" id="text-org4abdf28">
<p>
After trying a couple of file browsers I understood that all I needed was already there: <code>dired</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ranger
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:disabled</span>
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> ranger-preview-file t))

(use-package neotree
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:disabled</span>
  <span style="color: #00008b;">:bind</span> (<span style="color: #bc8f8f;">"&lt;f9&gt;"</span> . 'neotree-toggle)
  <span style="color: #00008b;">:init</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">slow rendering</span>
  (<span style="color: #4169e1;">setq</span> inhibit-compacting-font-caches t)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">set icons theme</span>
  (<span style="color: #4169e1;">setq</span> neo-theme (<span style="color: #4169e1;">if</span> (display-graphic-p) 'icons 'arrow))
  (<span style="color: #4169e1;">setq</span> neo-smart-open t))

(use-package treemacs
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:defer</span> t
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #00008b;">:map</span> global-map
        (<span style="color: #bc8f8f;">"&lt;f8&gt;"</span> . treemacs)))

(use-package treemacs-evil
  <span style="color: #00008b;">:after</span> (treemacs evil)
  <span style="color: #00008b;">:straight</span> t)

(use-package treemacs-magit
  <span style="color: #00008b;">:after</span> (treemacs magit)
  <span style="color: #00008b;">:straight</span> t)

(use-package all-the-icons-dired
  <span style="color: #00008b;">:straight</span> t)

(use-package dired
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">TIP: use ( to hide file information</span>
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:custom</span> ((dired-listing-switches <span style="color: #bc8f8f;">"-agho --group-directories-first"</span>))
  <span style="color: #00008b;">:commands</span> (dired dired-jump)
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-x C-j"</span> . dired-jump))
  <span style="color: #00008b;">:hook</span>
  (dired-mode . all-the-icons-dired-mode)
  <span style="color: #00008b;">:config</span>
  (evil-define-key 'normal 'dired-mode-map
    <span style="color: #bc8f8f;">"h"</span> 'dired-single-up-directory
    <span style="color: #bc8f8f;">"l"</span> 'dired-single-buffer))

(use-package dired-single
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org124a8de" class="outline-3">
<h3 id="org124a8de">Web browsers</h3>
<div class="outline-text-3" id="text-org124a8de">
<p>
And because in the Emacs operating system we can do just about anything, I have added the <code>shr-tag-pre-highlight</code> and <code>shrface</code>
packages, so <code>eww</code> gets an <code>org-mode</code> look and feel. This comes handy when comparing programming languages in Rosetta Code.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package shr-tag-pre-highlight
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">shrface-shr-tag-pre-highlight</span> (pre)
    <span style="color: #bc8f8f;">"Highlighting code in PRE."</span>
    (<span style="color: #4169e1;">let*</span> ((shr-folding-mode 'none)
           (shr-current-font 'default)
           (code (<span style="color: #4169e1;">with-temp-buffer</span>
                   (shr-generic pre)
                   (buffer-string)))
           (lang (<span style="color: #4169e1;">or</span> (shr-tag-pre-highlight-guess-language-attr pre)
                     (<span style="color: #4169e1;">let</span> ((sym (language-detection-string code)))
                       (<span style="color: #4169e1;">and</span> sym (symbol-name sym)))))
           (mode (<span style="color: #4169e1;">and</span> lang
                      (shr-tag-pre-highlight--get-lang-mode lang))))
      (shr-ensure-newline)
      (shr-ensure-newline)
      (<span style="color: #4169e1;">setq</span> start (point))
      (insert
       (propertize (concat <span style="color: #bc8f8f;">"#+BEGIN_SRC "</span> lang <span style="color: #bc8f8f;">"\n"</span>) 'face 'org-block-begin-line)
       (<span style="color: #4169e1;">or</span> (<span style="color: #4169e1;">and</span> (fboundp mode)
                (<span style="color: #4169e1;">with-demoted-errors</span> <span style="color: #bc8f8f;">"Error while fontifying: %S"</span>
                  (shr-tag-pre-highlight-fontify code mode)))
           code)
       (propertize <span style="color: #bc8f8f;">"#+END_SRC"</span> 'face 'org-block-end-line ))
      (shr-ensure-newline)
      (<span style="color: #4169e1;">setq</span> end (point))
      (add-face-text-property start end '(<span style="color: #00008b;">:background</span> <span style="color: #bc8f8f;">"#1f2329"</span> <span style="color: #00008b;">:extend</span> t))
      (shr-ensure-newline)
      (insert <span style="color: #bc8f8f;">"\n"</span>)))
  <span style="color: #00008b;">:config</span>
  (add-to-list 'shr-external-rendering-functions
               '(pre . shrface-shr-tag-pre-highlight)))

(use-package shrface
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (shrface-basic)
  (shrface-trial)
  (shrface-default-keybindings)
  (<span style="color: #4169e1;">setq</span> shrface-href-versatile t))

(use-package eww
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:hook</span>
  ((eww-after-render . shrface-mode))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">shrface</span>))
</pre>
</div>

<p>
And now that we are here, why don't we surf YouTube with this amazing package:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elfeed
  <span style="color: #00008b;">:straight</span> t)

(use-package elfeed-tube
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> elfeed
  <span style="color: #00008b;">:config</span>
  (elfeed-tube-setup)
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #00008b;">:map</span> elfeed-show-mode-map
        (<span style="color: #bc8f8f;">"F"</span> . elfeed-tube-fetch)
        ([remap save-buffer] . elfeed-tube-save)
        <span style="color: #00008b;">:map</span> elfeed-search-mode-map
        (<span style="color: #bc8f8f;">"F"</span> . elfeed-tube-fetch)
        ([remap save-buffer] . elfeed-tube-save)))

(use-package elfeed-tube-mpv
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #00008b;">:map</span> elfeed-show-mode-map
        (<span style="color: #bc8f8f;">"C-c C-f"</span> . elfeed-tube-mpv-follow-mode)
        (<span style="color: #bc8f8f;">"C-c C-w"</span> . elfeed-tube-mpv-where)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb5f7def" class="outline-3">
<h3 id="orgb5f7def">IRC and Matrix</h3>
<div class="outline-text-3" id="text-orgb5f7def">
<p>
Software tinkerers tend to hang out on IRCs a lot, so this configuration is very useful to get help on those channels, and keeping
in touch with friends.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ement
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:type</span> git
             <span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"alphapapa/ement.el"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd57b80f" class="outline-3">
<h3 id="orgd57b80f">PDF support</h3>
<div class="outline-text-3" id="text-orgd57b80f">
<p>
Another C Library, it works better than the default Emacs PDF viewer, for instance it allows hyperlinks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pdf-tools
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span>
  (<span style="color: #00008b;">:map</span> pdf-view-mode-map
        (<span style="color: #bc8f8f;">"C-s"</span> . isearch-forward-regexp))
  <span style="color: #00008b;">:hook</span>
  ((pdf-view-mode . (<span style="color: #4169e1;">lambda</span> ()
                      (display-line-numbers-mode -1))))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq-default</span> pdf-view-display-size 'fit-page)
  (<span style="color: #4169e1;">setq</span> pdf-annot-activate-created-annotations t)
  (pdf-tools-install))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe765a3" class="outline-3">
<h3 id="orgbe765a3">Multimedia player</h3>
<div class="outline-text-3" id="text-orgbe765a3">
<p>
For multimedia content I use <code>emms</code>, a lightweight player written in Emacs Lisp, that integrates perfectly
with <code>mpv</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package emms
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">emms-setup</span>)
  (emms-all)
  (add-to-list 'emms-player-list 'emms-player-mpv t)
  (emms-player-set emms-player-mpv
                   'regex
                   (<span style="color: #4169e1;">rx</span> (<span style="color: #4169e1;">or</span> (: <span style="color: #bc8f8f;">"https://"</span> (* nonl) <span style="color: #bc8f8f;">"youtube.com"</span> (* nonl))
                           (+ (? (<span style="color: #4169e1;">or</span> <span style="color: #bc8f8f;">"https://"</span> <span style="color: #bc8f8f;">"http://"</span>))
                              (* nonl)
                              (regexp (eval (emms-player-simple-regexp
                                             <span style="color: #bc8f8f;">"mp4"</span> <span style="color: #bc8f8f;">"mov"</span> <span style="color: #bc8f8f;">"wmv"</span> <span style="color: #bc8f8f;">"webm"</span> <span style="color: #bc8f8f;">"flv"</span> <span style="color: #bc8f8f;">"avi"</span> <span style="color: #bc8f8f;">"mkv"</span>))))))))
</pre>
</div>

<p>
Alternatively, I use the <code>empv</code> package, which provides a more elaborated interface to the <code>mpv</code> player.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package empv
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:type</span> git
             <span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"isamert/empv.el"</span>)
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> empv-invidious-instance <span style="color: #bc8f8f;">"https://invidious.tiekoetter.com/api/v1"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org43c5899" class="outline-2">
<h2 id="org43c5899">Programming</h2>
<div class="outline-text-2" id="text-org43c5899">
<p>
Here you can find my configuration for different programming languages. I will introduce it
in a laconic manner, because this section is rather opinionated.
</p>
</div>

<div id="outline-container-orge958bc0" class="outline-3">
<h3 id="orge958bc0">Lisp</h3>
<div class="outline-text-3" id="text-orge958bc0">
<p>
The language that gave birth to the "Maxwell equations of software". Lisp dialects are my favorite programming languages.
Below I add a vague description of some of the things I like from them.
</p>
</div>

<div id="outline-container-org0e742a5" class="outline-4">
<h4 id="org0e742a5">General</h4>
<div class="outline-text-4" id="text-org0e742a5">
<p>
Enhance the overall lisp experience in Emacs with Lispy, and its <i>evil</i> friend Lispyville.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lispy
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> ((emacs-lisp-mode . lispy-mode)
         (lisp-mode . lispy-mode)
         (scheme-mode . lispy-mode)))

(use-package lispyville
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> (lispy-mode . lispyville-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1ac6d9" class="outline-4">
<h4 id="orge1ac6d9">Common Lisp</h4>
<div class="outline-text-4" id="text-orge1ac6d9">
<p>
Powerful compiler, great libraries and OOP features.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package slime
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.lisp\\'"</span> . lisp-mode)
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq</span> slime-net-coding-system 'utf-8-unix
        inferior-lisp-program <span style="color: #bc8f8f;">"sbcl"</span>)
  (<span style="color: #4169e1;">setq</span> slime-contribs '(slime-fancy
                         slime-repl
                         slime-autodoc)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e86752" class="outline-4">
<h4 id="org6e86752">Scheme and Racket</h4>
<div class="outline-text-4" id="text-org6e86752">
<p>
Minimalism and elegant syntax, the purest. Hygienic macros. Racket has a great documentation, and scribble!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package geiser
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> geiser-active-implementations '(chez)))

(use-package geiser-chez
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq</span> geiser-chez-binary <span style="color: #bc8f8f;">"scheme"</span>))

(use-package racket-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.rkt\\'"</span> <span style="color: #bc8f8f;">"\\.scrbl\\'"</span>)
  <span style="color: #00008b;">:hook</span> ((racket-mode . racket-xp-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9282629" class="outline-4">
<h4 id="org9282629">Clojure</h4>
<div class="outline-text-4" id="text-org9282629">
<p>
Largest library ecosystem thanks to JVM, vectors and maps. Strong focus on functional programming.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package clojure-mode
  <span style="color: #00008b;">:straight</span> t)

(use-package cider
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> nrepl-log-messages t
        cider-font-lock-dynamically '(macro core function var)
        cider-overlays-use-font-lock t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1452e7c" class="outline-4">
<h4 id="org1452e7c">Hy</h4>
<div class="outline-text-4" id="text-org1452e7c">
<p>
The youngest in this list, similar in spirit to Clojure, but translates to Python's AST.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hy-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.hy\\'"</span>
  <span style="color: #00008b;">:commands</span> (hy-mode org-babel-execute:hy)
  <span style="color: #00008b;">:interpreter</span> <span style="color: #bc8f8f;">"hy"</span>
  <span style="color: #00008b;">:hook</span>
  (hy-mode . company-mode)
  (hy-mode . (<span style="color: #4169e1;">lambda</span> () (lispy-mode 1)))
  <span style="color: #00008b;">:config</span>
  (add-hook 'hy-mode-hook #'paredit-mode)
  (add-hook 'hy-mode-hook #'rainbow-delimiters-mode))
</pre>
</div>

<p>
Sometimes it is very useful to expand Emacs Lisp macros to better understand their functionality.
For this, the <code>macrostep</code> package comes very handy.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package macrostep
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:bind</span> (<span style="color: #00008b;">:map</span> emacs-lisp-mode-map
              (<span style="color: #bc8f8f;">"C-c e"</span> . macrostep-expand)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbd14f3a" class="outline-3">
<h3 id="orgbd14f3a">My Emacs Lisp packages</h3>
<div class="outline-text-3" id="text-orgbd14f3a">
<p>
Here I plan to add small packages I write from time to time, mainly for non-trivial editing
tasks that I stumble against at work.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">parse-greenx.el --- Utilities to refactor GreenX library</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Copyright (C) Dr. Ramon L. Panades Barrueta</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Author: Dr. Ramon L. Panades Barrueta</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Keywords: parsing, refactoring</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">This module provides some procedures to manipulate the GreenX</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">hard-coded arrays.</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">prune-chars-greenx</span> (beginning end)
  <span style="color: #bc8f8f;">"Remove undesired characters in active region from BEGINNING to END."</span>
  (<span style="color: #4169e1;">when</span> (use-region-p)
    (mapcar (<span style="color: #4169e1;">lambda</span> (spurious-string)
              (replace-string-in-region spurious-string
                                        <span style="color: #bc8f8f;">" "</span>
                                        beginning
                                        end))
            '(<span style="color: #bc8f8f;">","</span> <span style="color: #bc8f8f;">"&amp;"</span>))))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">insert-matrix-cols-greenx</span> (matrix-as-list len col-count)
  <span style="color: #bc8f8f;">"Print COL-COUNT columns of length LEN for MATRIX-AS-LIST."</span>
  (<span style="color: #4169e1;">when</span> matrix-as-list
    (<span style="color: #4169e1;">let</span> ((col-as-string
           (vconcat
            (mapcar
             (<span style="color: #4169e1;">lambda</span> (the-numbers)
               (format <span style="color: #bc8f8f;">"%s, "</span> the-numbers))
             (butlast matrix-as-list
                      (- (length matrix-as-list) (- len 1))))
            (list (format <span style="color: #bc8f8f;">"%s"</span> (nth (- len 1) matrix-as-list))))))
      (<span style="color: #4169e1;">setq</span> col-count (1+ col-count))
      (insert <span style="color: #bc8f8f;">"\n"</span>
              (format <span style="color: #bc8f8f;">"aw%%aw_erange_matrix(:, %d) = %s"</span> col-count col-as-string)))
    (insert-matrix-cols-greenx (nthcdr len matrix-as-list) len col-count)))

<span style="color: #b22222;">;;;</span><span style="color: #b22222;">###</span><span style="color: #ff0000; font-weight: bold;">autoload</span>
(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">matrix-to-cols-greenx</span> (start end len)
  <span style="color: #bc8f8f;">"Print columns of array of shape (-1, LEN) in active region START END."</span>
  (<span style="color: #4169e1;">interactive</span> <span style="color: #bc8f8f;">"r\nP"</span>)
  (prune-chars-greenx start end)
  (<span style="color: #4169e1;">unwind-protect</span>
      (<span style="color: #4169e1;">let</span> ((mstart (make-marker))
            (mend (make-marker)))
        (set-marker mstart start)
        (set-marker mend end)
        (goto-char start)
        (<span style="color: #4169e1;">let*</span> ((text (buffer-substring start end))
               (elems-matrix
                (mapcar
                 (<span style="color: #4169e1;">lambda</span> (srow)
                   (car (read-from-string srow)))
                 (split-string text nil t))))
          (goto-char end)
          (insert-matrix-cols-greenx elems-matrix len 0)
          (delete-region mstart mend)))
    (widen)))

(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">parse-greenx</span>)
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">parse-greenx.el ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd3fc06" class="outline-3">
<h3 id="orgbd3fc06">Fortran</h3>
<div class="outline-text-3" id="text-orgbd3fc06">
<p>
Fortran is a major component of my job as a physicist, this package provides all I need. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package f90-mode
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.f90\\'"</span>)
  <span style="color: #00008b;">:hook</span>
  (f90-mode . (<span style="color: #4169e1;">lambda</span> () (<span style="color: #4169e1;">setq</span> flycheck-gfortran-args <span style="color: #bc8f8f;">"-ffree-form"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c9113b" class="outline-3">
<h3 id="org1c9113b">IRPF90</h3>
<div class="outline-text-3" id="text-org1c9113b">
<p>
<a href="http://irpf90.ups-tlse.fr/">IRPF90</a> is an environment that allows for efficient functional programming in FORTRAN
using the Implicit Reference to Parameters (IRP) method. I have developed a derived
mode for IRPF90:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">irp-mode.el --- A major mode for dealing with IRPF90 files</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">An attempt to support Scemama's IRPF90 in Emacs</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Define IRPF90 extended FORTRAN syntax</span>

(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">irp-font-lock-keywords</span>)

(<span style="color: #4169e1;">setq</span> irp-font-lock-keywords
      (<span style="color: #4169e1;">let*</span> (
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">Define different keywords</span>
             (x-keywords '(<span style="color: #bc8f8f;">"BEGIN_PROVIDER"</span> <span style="color: #bc8f8f;">"END_PROVIDER"</span> <span style="color: #bc8f8f;">"ASSERT"</span>
                           <span style="color: #bc8f8f;">"FREE"</span> <span style="color: #bc8f8f;">"PROVIDE"</span> <span style="color: #bc8f8f;">"BEGIN_TEMPLATE"</span>
                           <span style="color: #bc8f8f;">"END_TEMPLATE"</span> <span style="color: #bc8f8f;">"BEGIN_SHELL"</span>
                           <span style="color: #bc8f8f;">"END_SHELL"</span> <span style="color: #bc8f8f;">"IRP_IF"</span> <span style="color: #bc8f8f;">"IRP_ELSE"</span> <span style="color: #bc8f8f;">"TOUCH"</span>
                           <span style="color: #bc8f8f;">"SOFT_TOUCH"</span>))
             (x-types '(<span style="color: #bc8f8f;">"double precision"</span> <span style="color: #bc8f8f;">"integer"</span>))
             (x-comments '(<span style="color: #bc8f8f;">"BEGIN_DOC"</span> <span style="color: #bc8f8f;">"END_DOC"</span>))

             <span style="color: #b22222;">;; </span><span style="color: #b22222;">Generate regex</span>
             (x-keywords-regexp (regexp-opt x-keywords 'words))
             (x-types-regexp (regexp-opt x-types 'words))
             (x-comments-regexp (regexp-opt x-comments 'words)))

        `(
          (,x-types-regexp . font-lock-type-face)
          (,x-keywords-regexp . font-lock-preprocessor-face)
          (,x-comments-regexp . font-lock-comment-face)
          )))

<span style="color: #b22222;">;;;</span><span style="color: #b22222;">###</span><span style="color: #ff0000; font-weight: bold;">autoload</span>
(<span style="color: #4169e1;">define-derived-mode</span> <span style="color: #0000ff;">irp-mode</span> f90-mode <span style="color: #bc8f8f;">"irp mode"</span>
  <span style="color: #bc8f8f;">"Major mode for editing IRPF90 files."</span>
  <span style="color: #00008b;">:syntax-table</span> nil
  <span style="color: #00008b;">:abbrev-table</span> nil
  (font-lock-add-keywords nil irp-font-lock-keywords))

(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">irp-mode</span>)
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">irp-mode.el ends here</span>
</pre>
</div>

<p>
This mode can be also configured with <code>use-package</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package irp-mode
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.irp.f\\'"</span>)
  <span style="color: #00008b;">:load-path</span> <span style="color: #bc8f8f;">"~/.emacs.d/lib"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ed65c7" class="outline-3">
<h3 id="org2ed65c7">C and C++</h3>
<div class="outline-text-3" id="text-org2ed65c7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ccls
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> ((c-mode c++-mode objc-mode cuda-mode) .
         (<span style="color: #4169e1;">lambda</span> () (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">ccls</span>) (lsp)))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> c-basic-offset 6)
  (<span style="color: #4169e1;">setq</span> c-default-style '((java-mode . <span style="color: #bc8f8f;">"java"</span>)
                          (awk-mode . <span style="color: #bc8f8f;">"awk"</span>)
                          (other . <span style="color: #bc8f8f;">"linux"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1376d14" class="outline-3">
<h3 id="org1376d14">Rust</h3>
<div class="outline-text-3" id="text-org1376d14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rust-mode
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a759bd" class="outline-3">
<h3 id="org8a759bd">Makefile</h3>
<div class="outline-text-3" id="text-org8a759bd">
<p>
Here it is important to mention that the following <code>use-package</code> declaration exists solely
for aesthetic and organizational purposes. If we <code>macrostep-expand</code> it, we can convince ourselves: 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package make-mode
  <span style="color: #00008b;">:straight</span> nil)
</pre>
</div>

<p>
which expands to
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">progn</span>
  (use-package-ensure-elpa 'make-mode
                           '(nil)
                           'nil)
  (<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">use-package--warning79</span>
    (<span style="color: #4169e1;">function</span>
     (<span style="color: #4169e1;">lambda</span>
       (keyword err)
       (<span style="color: #4169e1;">let</span>
           ((msg
             (format <span style="color: #bc8f8f;">"%s/%s: %s"</span> 'make-mode keyword
                     (error-message-string err))))
         (display-warning 'use-package msg <span style="color: #00008b;">:error</span>)))))
  (<span style="color: #4169e1;">condition-case-unless-debug</span> err
      (<span style="color: #4169e1;">if</span>
          (not
           (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">make-mode</span> nil t))
          (display-warning 'use-package
                           (format <span style="color: #bc8f8f;">"Cannot load %s"</span> 'make-mode)
                           <span style="color: #00008b;">:error</span>))
    (<span style="color: #ff0000; font-weight: bold;">error</span>
     (funcall use-package--warning79 <span style="color: #00008b;">:catch</span> err))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f6a4ec" class="outline-3">
<h3 id="org6f6a4ec">Cmake</h3>
<div class="outline-text-3" id="text-org6f6a4ec">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package cmake-mode
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"CMakeLists\\.txt\\'"</span> <span style="color: #bc8f8f;">"\\.cmake</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">(.in</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">)?\\'"</span>)
  <span style="color: #00008b;">:config</span>
  (add-to-list 'company-backends 'company-cmake))

(use-package eldoc-cmake
  <span style="color: #00008b;">:after</span> company
  <span style="color: #00008b;">:hook</span> (cmake-mode . eldoc-cmake-enable))

(use-package cmake-font-lock
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:preface</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-cmake-font-lock</span> ()
    (<span style="color: #4169e1;">let</span> ((auto-refresh-defaults (boundp 'font-lock-keywords)))
      (cmake-font-lock-activate)
      (<span style="color: #4169e1;">when</span> auto-refresh-defaults
        (font-lock-refresh-defaults))))
  <span style="color: #00008b;">:init</span>
  (add-hook 'cmake-mode-hook #'my-cmake-font-lock))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf958a6c" class="outline-3">
<h3 id="orgf958a6c">Cuda</h3>
<div class="outline-text-3" id="text-orgf958a6c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package cuda-mode
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.cu\\'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org308d478" class="outline-3">
<h3 id="org308d478">Python</h3>
<div class="outline-text-3" id="text-org308d478">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package python
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> python-shell-interpreter <span style="color: #bc8f8f;">"jupyter"</span>
        python-shell-interpreter-args <span style="color: #bc8f8f;">"console --simple-prompt"</span>
        python-shell-prompt-detect-failure-warning nil)
  (add-to-list 'python-shell-completion-native-disabled-interpreters <span style="color: #bc8f8f;">"jupyter"</span>))

(use-package ein
  <span style="color: #00008b;">:straight</span> t)

(use-package pyvenv
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:demand</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> pyvenv-workon <span style="color: #bc8f8f;">"emacs"</span>)
  (pyvenv-tracking-mode 1))

(use-package py-autopep8
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:hook</span> (python-mode . py-autopep8-enable-on-save))
</pre>
</div>

<p>
Additional support for Jupyter notebooks:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package jupyter
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org35450b7" class="outline-3">
<h3 id="org35450b7">Julia</h3>
<div class="outline-text-3" id="text-org35450b7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package julia-mode
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.jl\\'"</span>)

(use-package flycheck-julia
  <span style="color: #00008b;">:hook</span> (julia-mode . flycheck-julia-setup))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1202d7b" class="outline-3">
<h3 id="org1202d7b">Haskell</h3>
<div class="outline-text-3" id="text-org1202d7b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package haskell-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:custom</span>
  (haskell-process-load-or-reload-prompt t)
  (haskell-process-auto-import-loaded-modules t)
  (haskell-process-log t)
  (haskell-tags-on-save t))

(use-package flycheck-haskell
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq-default</span> flycheck-disabled-checkers '(haskell-stack-ghc))
  (add-hook 'haskell-mode-hook #'flycheck-haskell-setup))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb455e26" class="outline-3">
<h3 id="orgb455e26">Perl</h3>
<div class="outline-text-3" id="text-orgb455e26">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package cperl-mode
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">(</span><span style="color: #bc8f8f;">[pP][Llm]</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">|</span><span style="color: #bc8f8f;">al</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">)</span><span style="color: #bc8f8f;">\\'"</span> . cperl-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7cbeb55" class="outline-3">
<h3 id="org7cbeb55">Raku</h3>
<div class="outline-text-3" id="text-org7cbeb55">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package raku-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:defer</span> t
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.raku\\'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf19c92" class="outline-3">
<h3 id="orgdf19c92">Lua</h3>
<div class="outline-text-3" id="text-orgdf19c92">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lua-mode
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org220b94c" class="outline-3">
<h3 id="org220b94c">Org-mode</h3>
<div class="outline-text-3" id="text-org220b94c">
<p>
<a id="org2331190"></a>
</p>

<p>
Org-mode is the package allowing me to have this literate configuration. Org-superstar
makes org-mode files look gorgeous.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">display-ansi-colors</span> ()
    <span style="color: #bc8f8f;">"Fixes kernel output in emacs-jupyter"</span>
    (ansi-color-apply-on-region (point-min) (point-max)))
  <span style="color: #00008b;">:hook</span>
  (org-mode . (<span style="color: #4169e1;">lambda</span> () (<span style="color: #4169e1;">progn</span>
                           (add-hook 'after-save-hook #'org-babel-tangle <span style="color: #00008b;">:append</span> <span style="color: #00008b;">:local</span>)
                           (add-hook 'org-babel-after-execute-hook #'display-ansi-colors))))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">ox-beamer</span>)
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">ol-bibtex</span>)
  (add-to-list 'org-modules 'org-tempo)
  (org-babel-do-load-languages
   'org-babel-load-languages '((fortran . t)
                               (julia . t)
                               (python . t)
                               (jupyter . t)
                               (scheme . t)
                               (haskell . t)
                               (lisp . t)
                               (emacs-lisp . t)
                               (clojure . t)
                               (C . t)
                               (org . t)
                               (gnuplot . t)
                               (awk . t)
                               (latex . t)
                               (shell . t)))
  (<span style="color: #4169e1;">setq</span> org-babel-clojure-backend 'cider)
  (<span style="color: #4169e1;">setq</span> org-latex-pdf-process '(<span style="color: #bc8f8f;">"latexmk -shell-escape -pdf -outdir=%o %f"</span>))
  (<span style="color: #4169e1;">setq</span> org-preview-latex-default-process 'imagemagick)
  (<span style="color: #4169e1;">setq</span> org-file-apps '((<span style="color: #bc8f8f;">"\\.pdf\\'"</span> . <span style="color: #bc8f8f;">"evince %s"</span>)))
  (<span style="color: #4169e1;">setq</span> org-src-window-setup 'current-window)
  (<span style="color: #4169e1;">setq</span> org-startup-indented t)
  (<span style="color: #4169e1;">setq</span> org-latex-listings 'minted
        org-latex-packages-alist '((<span style="color: #bc8f8f;">""</span> <span style="color: #bc8f8f;">"minted"</span>)))
  (<span style="color: #4169e1;">setq</span> org-startup-with-inline-images t)
  (<span style="color: #4169e1;">setq</span> org-todo-keywords
        '((sequence <span style="color: #bc8f8f;">"TODO(t)"</span> <span style="color: #bc8f8f;">"BROKEN(b)"</span> <span style="color: #bc8f8f;">"RUNNING(r)"</span> <span style="color: #bc8f8f;">"VERIFY(v)"</span> <span style="color: #bc8f8f;">"URGENT(u)"</span> <span style="color: #bc8f8f;">"PARTIAL(p)"</span>
                    <span style="color: #bc8f8f;">"|"</span> <span style="color: #bc8f8f;">"DONE(d)"</span> <span style="color: #bc8f8f;">"OPTIONAL(o)"</span> <span style="color: #bc8f8f;">"DELEGATED(e)"</span> <span style="color: #bc8f8f;">"IRRELEVANT(i)"</span>)))
  (<span style="color: #4169e1;">setq</span> org-todo-keyword-faces
        '((<span style="color: #bc8f8f;">"BROKEN"</span> . <span style="color: #bc8f8f;">"red"</span>) (<span style="color: #bc8f8f;">"RUNNING"</span> . <span style="color: #bc8f8f;">"yellow"</span>)
          (<span style="color: #bc8f8f;">"VERIFY"</span> . <span style="color: #bc8f8f;">"light goldenrod"</span>) (<span style="color: #bc8f8f;">"URGENT"</span> . <span style="color: #bc8f8f;">"orange"</span>) (<span style="color: #bc8f8f;">"PARTIAL"</span> . <span style="color: #bc8f8f;">"burlywood"</span>)
          (<span style="color: #bc8f8f;">"OPTIONAL"</span> . <span style="color: #bc8f8f;">"green"</span>) (<span style="color: #bc8f8f;">"IRRELEVANT"</span> . <span style="color: #bc8f8f;">"LightBlue1"</span>)
          (<span style="color: #bc8f8f;">"DELEGATED"</span> . <span style="color: #bc8f8f;">"aquamarine3"</span>)))
  (plist-put org-format-latex-options <span style="color: #00008b;">:scale</span> 3.0)
  (add-hook 'org-babel-after-execute-hook 'org-redisplay-inline-images))

(use-package org-superstar
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:config</span>
  (add-hook 'org-mode-hook (<span style="color: #4169e1;">lambda</span> () (org-superstar-mode 1))))
</pre>
</div>

<p>
Some extra exporting formats:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ox-reveal
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> org
  <span style="color: #00008b;">:custom</span>
  (org-reveal-root <span style="color: #bc8f8f;">"file:///home/loren/bin/reveal.js"</span>)
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> org-reveal-mathjax t))

(use-package ox-hugo
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> org)

(use-package ox-ipynb
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"jkitchin/ox-ipynb"</span>)
  <span style="color: #00008b;">:after</span> org)
</pre>
</div>

<p>
And by the way, convert everything else to <code>org-mode</code> please:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-pandoc-import
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"tecosaur/org-pandoc-import"</span>
             <span style="color: #00008b;">:files</span> (<span style="color: #bc8f8f;">"*.el"</span> <span style="color: #bc8f8f;">"filters"</span> <span style="color: #bc8f8f;">"preprocessors"</span>)))
</pre>
</div>

<p>
The current Geiser implementation does not play well with <code>org-babel</code>, so I have decided to use <code>ob-racket</code>
for evaluating the Scheme code blocks:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ob-racket
  <span style="color: #00008b;">:after</span> org
  <span style="color: #00008b;">:config</span>
  (add-hook 'ob-racket-pre-runtime-library-load-hook
            #'ob-racket-raco-make-runtime-library)
  <span style="color: #00008b;">:straight</span> (ob-racket
             <span style="color: #00008b;">:type</span> git <span style="color: #00008b;">:host</span> github <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"hasu/emacs-ob-racket"</span>
             <span style="color: #00008b;">:files</span> (<span style="color: #bc8f8f;">"*.el"</span> <span style="color: #bc8f8f;">"*.rkt"</span>)))
</pre>
</div>

<p>
Finally, I set up my personal knowledge management system with <code>org-roam</code>. This package
leverages the power of <code>org-mode</code> to create knowledge networks using
Niklas Luhmann's <i>Zettelkasten</i> method.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:custom</span>
  (org-roam-directory (file-truename <span style="color: #bc8f8f;">"~/Documents/Arbeit/WIKI"</span>))
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-c n l"</span> . org-roam-buffer-toggle)
         (<span style="color: #bc8f8f;">"C-c n f"</span> . org-roam-node-find)
         (<span style="color: #bc8f8f;">"C-c n g"</span> . org-roam-graph)
         (<span style="color: #bc8f8f;">"C-c n i"</span> . org-roam-node-insert)
         (<span style="color: #bc8f8f;">"C-c n c"</span> . org-roam-capture)
         (<span style="color: #bc8f8f;">"C-c n j"</span> . org-roam-dailies-capture-today))
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">setq</span> org-roam-node-display-template
        (concat <span style="color: #bc8f8f;">"${title:*} "</span>
                (propertize <span style="color: #bc8f8f;">"${tags:10}"</span> 'face 'org-tag)))
  (org-roam-db-autosync-mode)
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-roam-protocol</span>))

(use-package org-roam-ui
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"org-roam/org-roam-ui"</span>
             <span style="color: #00008b;">:branch</span> <span style="color: #bc8f8f;">"main"</span>
             <span style="color: #00008b;">:files</span> (<span style="color: #bc8f8f;">"*.el"</span> <span style="color: #bc8f8f;">"out"</span>))
    <span style="color: #00008b;">:after</span> org-roam
    <span style="color: #00008b;">:config</span>
    (<span style="color: #4169e1;">setq</span> org-roam-ui-sync-theme t
          org-roam-ui-follow t
          org-roam-ui-update-on-save t
          org-roam-ui-open-on-start t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4dd5780" class="outline-3">
<h3 id="org4dd5780">Latex</h3>
<div class="outline-text-3" id="text-org4dd5780">
<p>
Auctex provides all you will ever need to work with Latex, and more. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package auctex
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.tex\\'"</span> . latex-mode)
  <span style="color: #00008b;">:commands</span> (latex-mode LaTeX-mode plain-tex-mode)
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">progn</span>
    (add-hook 'LaTeX-mode-hook #'LaTeX-preview-setup)
    (add-hook 'LaTeX-mode-hook 'LaTeX-math-mode)
    (add-hook 'LaTeX-mode-hook #'flyspell-mode)
    (add-hook 'LaTeX-mode-hook #'turn-on-reftex)
    (<span style="color: #4169e1;">setq</span> TeX-auto-save t
          TeX-parse-self t
          TeX-save-query nil
          TeX-PDF-mode t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org849a6cb" class="outline-3">
<h3 id="org849a6cb">Web</h3>
<div class="outline-text-3" id="text-org849a6cb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package php-mode
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.php\\'"</span>))

(use-package web-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:defer</span> t
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.html\\'"</span> <span style="color: #bc8f8f;">"\\.htm\\'"</span> <span style="color: #bc8f8f;">"\\.css\\'"</span>)
  <span style="color: #00008b;">:bind</span> ((<span style="color: #bc8f8f;">"C-c C-v"</span> . browse-url-of-buffer))
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">webmd-hooks-mine</span> ()
    <span style="color: #bc8f8f;">"Some hooks for web mode."</span>
    (<span style="color: #4169e1;">setq</span> web-mode-markup-indent-offset 2)
    (<span style="color: #4169e1;">setq</span> web-mode-css-indent-offset 2)
    (<span style="color: #4169e1;">setq</span> web-mode-code-indent-offset 2)
    (<span style="color: #4169e1;">setq</span> web-mode-enable-current-column-highlight t)
    (<span style="color: #4169e1;">setq</span> web-mode-enable-current-element-highlight t)
    (set-face-attribute 'web-mode-html-tag-bracket-face nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"red"</span>))

  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">web-mode-flyspell-verify</span> ()
    <span style="color: #bc8f8f;">"Make flyspell behave correctly in web mode."</span>
    (<span style="color: #4169e1;">let</span> ((f (get-text-property (- (point) 1) 'face)))
      (not (memq f '(web-mode-html-attr-value-face
                     web-mode-html-tag-face
                     web-mode-html-attr-name-face
                     web-mode-doctype-face
                     web-mode-keyword-face
                     web-mode-function-name-face
                     web-mode-variable-name-face
                     web-mode-css-property-name-face
                     web-mode-css-selector-face
                     web-mode-css-color-face
                     web-mode-type-face)
                 ))))
  (put 'web-mode 'flyspell-mode-predicate 'web-mode-flyspell-verify)
  <span style="color: #00008b;">:hook</span>
  ((web-mode . company-mode)
   (web-mode . emmet-mode)
   (web-mode . (<span style="color: #4169e1;">lambda</span> () (flyspell-mode 1)))
   (web-mode . webmd-hooks-mine)))

(use-package emmet-mode
  <span style="color: #00008b;">:straight</span> t)

(use-package js-mode <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.js\\'"</span>))

(use-package simple-httpd
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1bf7df8" class="outline-3">
<h3 id="org1bf7df8">YAML</h3>
<div class="outline-text-3" id="text-org1bf7df8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yaml-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">.ya?ml</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d97eef" class="outline-3">
<h3 id="org3d97eef">Markdown</h3>
<div class="outline-text-3" id="text-org3d97eef">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package markdown-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq-default</span> markdown-hide-markup t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga0c2f99" class="outline-3">
<h3 id="orga0c2f99">reStructuredText</h3>
<div class="outline-text-3" id="text-orga0c2f99">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rst
  <span style="color: #00008b;">:straight</span> nil
  <span style="color: #00008b;">:mode</span> (<span style="color: #bc8f8f;">"\\.rst\\'"</span> . rst-mode)
  <span style="color: #00008b;">:bind</span> (<span style="color: #00008b;">:map</span> rst-mode-map
              (<span style="color: #bc8f8f;">"M-a"</span> . rst-backward-section)
              (<span style="color: #bc8f8f;">"M-e"</span> . rst-forward-section))
  <span style="color: #00008b;">:init</span>
  (<span style="color: #4169e1;">setq</span> rst-indent-width 2))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbbb8858" class="outline-3">
<h3 id="orgbbb8858">AsciiDoc</h3>
<div class="outline-text-3" id="text-orgbbb8858">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package adoc-mode
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga56d14e" class="outline-3">
<h3 id="orga56d14e">JSON</h3>
<div class="outline-text-3" id="text-orga56d14e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package json-mode
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.json\\'"</span>)

(use-package flymake-json
  <span style="color: #00008b;">:hook</span> (json-mode . flymake-json-load))
</pre>
</div>
</div>
</div>

<div id="outline-container-org071d722" class="outline-3">
<h3 id="org071d722">Git</h3>
<div class="outline-text-3" id="text-org071d722">
<p>
A porcelain as glorious as the one from Meißen:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package magit
  <span style="color: #00008b;">:straight</span> t)

(use-package git-modes
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> ((<span style="color: #bc8f8f;">"\\.gitattributes\\'"</span> . gitattributes-mode)
         (<span style="color: #bc8f8f;">"\\.gitconfig\\'"</span> . gitconfig-mode)
         (<span style="color: #bc8f8f;">"\\.gitignore\\'"</span> . gitignore-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf6b128" class="outline-3">
<h3 id="orgaf6b128">GitLab CI</h3>
<div class="outline-text-3" id="text-orgaf6b128">
<p>
This package comes very handy when writing GitLab pipelines:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gitlab-ci-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span>
  (<span style="color: #bc8f8f;">"\\.gitlab-ci.yaml\\'"</span> <span style="color: #bc8f8f;">"\\.gitlab-ci.yml\\'"</span>))

(use-package gitlab-ci-mode-flycheck
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> flycheck gitlab-ci-mode
  <span style="color: #00008b;">:init</span>
  (gitlab-ci-mode-flycheck-enable))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb118495" class="outline-3">
<h3 id="orgb118495">The heretic Vimscript</h3>
<div class="outline-text-3" id="text-orgb118495">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package vimrc-mode
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org11db5f2" class="outline-3">
<h3 id="org11db5f2">Nix expressions language</h3>
<div class="outline-text-3" id="text-org11db5f2">
<p>
Syntax highlighting for Nix expression's language files
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-mode
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:mode</span> <span style="color: #bc8f8f;">"\\.nix\\'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org41bd221" class="outline-3">
<h3 id="org41bd221">GNU Guix package manager</h3>
<div class="outline-text-3" id="text-org41bd221">
<p>
<a href="https://guix.gnu.org/">Guix</a> is a functional package manager inspired by <a href="https://nixos.org/">Nix</a>, but using Guile scheme instead of the Nix expression's language.
This package offers an Emacs interface to it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package guix
  <span style="color: #00008b;">:straight</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9c80ca9" class="outline-2">
<h2 id="org9c80ca9">Dirty hacks</h2>
<div class="outline-text-2" id="text-org9c80ca9">
<p>
The usual downside of using bleeding-edge software, every now and then something needs to be manually fixed. Here I add
temporary workarounds to broken packages.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Nix-mode needs this package</span>
(use-package reformatter
  <span style="color: #00008b;">:straight</span> t)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">A bunch of packages need it, including magit</span>
(use-package compat
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"emacs-compat/compat"</span>))
</pre>
</div>
</div>
</div>


<div id="outline-container-org44eccf9" class="outline-2">
<h2 id="org44eccf9">Footer of the Emacs package</h2>
<div class="outline-text-2" id="text-org44eccf9">
<p>
<a id="org4021a3c"></a>
</p>

<p>
Thank you for reading 'till the end or for being interested on how to end an Emacs package. If you would
like to try my configuration, feel free to <a href="https://github.com/Panadestein/emacsd/fork">fork it</a> on GitHub. So that's it, let's gracefully finish tangling
everything:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">init.el</span>)
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">init.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: <a href="https://panadestein.github.io/">Panadestein</a></p>
</div>
</body>
</html>
